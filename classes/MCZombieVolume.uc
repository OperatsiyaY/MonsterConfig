class MCZombieVolume extends ZombieVolume;function PostInitMonster(KFMonster Mon, MCMonsterInfo MonInfo){	local int PlayersCount;	local MonsterConfig SC;	local float TempDamage;		SC = MCGameType(Level.Game).SandboxController;	PlayersCount = SC.GetNumPlayers(true) - 1;	Mon.Health = Min(MonInfo.HealthMax,MonInfo.Health+MonInfo.PerPlayer.Health*PlayersCount);	Mon.Health *= SC.MonsterBodyHPMod * SC.MapInfo.MonsterBodyHPMod;	Mon.HealthMax = Mon.Health;	Mon.HeadHealth = Min(MonInfo.HeadHealthMax,MonInfo.HeadHealth+MonInfo.PerPlayer.HeadHealth*PlayersCount);	Mon.HeadHealth *= SC.MonsterHeadHPMod * SC.MapInfo.MonsterHeadHPMod;	if ( MonInfo.Speed <= 0 )	{		Mon.OriginalGroundSpeed *= MonInfo.SpeedMod;		Mon.GroundSpeed = Mon.OriginalGroundSpeed;		Mon.WaterSpeed *= MonInfo.SpeedMod;		Mon.AirSpeed *= MonInfo.SpeedMod;	}	else	{		Mon.OriginalGroundSpeed = MonInfo.Speed;		Mon.GroundSpeed = Mon.OriginalGroundSpeed;		Mon.WaterSpeed = Mon.GroundSpeed * 0.90;		Mon.AirSpeed = Mon.GroundSpeed * 1.10;	}		Mon.OriginalGroundSpeed *= SC.MonsterSpeedMod * SC.MapInfo.MonsterSpeedMod;	Mon.GroundSpeed = Mon.OriginalGroundSpeed;	Mon.WaterSpeed *= SC.MonsterSpeedMod * SC.MapInfo.MonsterSpeedMod;	Mon.AirSpeed *= SC.MonsterSpeedMod * SC.MapInfo.MonsterSpeedMod;		TempDamage = Mon.MeleeDamage * SC.MonsterDamageMod * SC.MapInfo.MonsterDamageMod;	Mon.MeleeDamage = TempDamage;	TempDamage = TempDamage - float(Mon.MeleeDamage);		if ( FRand() < TempDamage )	{		Mon.MeleeDamage += 1;	}		TempDamage = Mon.ScreamDamage * SC.MonsterDamageMod * SC.MapInfo.MonsterDamageMod;	Mon.MeleeDamage = TempDamage;	TempDamage = TempDamage - float(Mon.MeleeDamage);		if ( FRand() < TempDamage )	{		Mon.ScreamDamage += 1;	}	}//--------------------------------------------------------------------------------------------------// UMZombieVolume maked runtime, so brush loosed, so we just copy spawnpoints, no need InitSpawnPointsfunction InitSpawnPoints();//--------------------------------------------------------------------------------------------------//Experimental volume for spawning squads of zombies.function bool MCSpawnInHere( out array<MCMonsterInfo> zombies, optional bool test,    optional out int numspawned, optional out int TotalMaxMonsters, optional int MaxMonstersAtOnceLeft,    optional out int TotalZombiesValue, optional bool bTryAllSpawns ){	local int i,l,j,zc,yc;	local KFMonster Act;	local byte fl;	local rotator RandRot;	local vector TrySpawnPoint;	local int NumTries;		/* First make sure there are any zombie types allowed to spawn in here */	l = zombies.Length;	zc = DisallowedZeds.Length;	yc = OnlyAllowedZeds.Length;	for( i=0; i<l; i++ )	{		fl = zombies[i].MonsterClass.Default.ZombieFlag;		if( (!bNormalZeds && fl==0) || (!bRangedZeds && fl==1) || (!bLeapingZeds && fl==2) || (!bMassiveZeds && fl==3) )			goto'RemoveEntry';		if( zc==0 && yc==0 )			continue;		for( j=0; j<zc; j++ )			if( ClassIsChildOf(zombies[i].MonsterClass,DisallowedZeds[j]) )				goto'RemoveEntry';		if( yc>0 )		{			for( j=0; j<yc; j++ )				if( ClassIsChildOf(zombies[i].MonsterClass,OnlyAllowedZeds[j]) )					goto'LoopEnd';RemoveEntry:			zombies.Remove(i,1);			l--;			i--;		}LoopEnd:	}	if( l==0 )		return false;	if( !test )	{		if( ZombieCountMulti<1 )			zombies.Length = Max(zombies.Length*ZombieCountMulti,1); // Decrease the size.		else if( ZombieCountMulti>1 )		{			// Increase the size and scramble zombie spawn types.			zombies.Length = Max(zombies.Length*(ZombieCountMulti/2+ZombieCountMulti*FRand()),zombies.Length);			l = zombies.Length;			for( i=0; i<l; i++ )				if( zombies[i]==None )					zombies[i] = zombies[Rand(i)];		}		if( zombies.Length==0 )			return false;	}	/* Now do the actual spawning */	if( !test )	{		l = zombies.Length;		for( i=0; i<l; i++ )		{			if( TotalMaxMonsters>0 && MaxMonstersAtOnceLeft>0) // Always make sure we are allowed to spawn em.			{				RandRot.Yaw = Rand(65536);                if( bTryAllSpawns )                {                    // Try spawning in all the points                    NumTries = SpawnPos.Length;                }                else                {                    // Try spawning 3 times in 3 dif points.                    NumTries = 3;                }                for( j=0; j<NumTries; j++ )		        {                    TrySpawnPoint = SpawnPos[Rand(SpawnPos.Length)];    				if( !PlayerCanSeePoint(TrySpawnPoint, zombies[i].MonsterClass) )    				{                        Act = Spawn(zombies[i].MonsterClass,,,TrySpawnPoint,RandRot);						// Act = Spawn(class'KFChar.ZombieBloat_XMas',,,TrySpawnPoint,RandRot);                    }                    else                    {                        if( bDebugZoneSelection )                        {                            log("Failed trying to spawn "$zombies[i].MonsterClass$" attempt "$j);                        }                        continue;                    }    				if(Act!=None)    				{    				     // Triggers & Event Tracking    				    /* ========================================================================*/						if(ZombieSpawnTag != '')						{							Act.Tag = ZombieSpawnTag ;						}						if(ZombieDeathEvent != '')						{							Act.Event = ZombieDeathEvent;						}                        AddZEDToSpawnList(Act);						/*==========================================================================*/                        if( bDebugSpawnSelection )                        {                            DrawDebugCylinder(Act.Location,vect(1,0,0),vect(0,1,0),vect(0,0,1),Act.CollisionRadius,Act.CollisionHeight,5,0, 255, 0);                        }    					if( bDebugZoneSelection )    					{                            log("Spawned "$zombies[i].MonsterClass$" on attempt "$j);                        }                        break;    				}				}				if(Act!=None)				{					TotalMaxMonsters--;					MaxMonstersAtOnceLeft--;					numspawned++;					TotalZombiesValue += Act.ScoringValue;					PostInitMonster(Act,zombies[i]);					MCGameType(Level.Game).NotifyMonsterSpawn(Act,zombies[i]);				}			}		}		if( numspawned>0 )		{            LastSpawnTime = Level.TimeSeconds;            LastFailedSpawnTime = 0;            return true;		}		else		{            LastFailedSpawnTime = Level.TimeSeconds;            return false;		}	}	return true;}defaultproperties{	bStatic=false	bNoDelete=false}